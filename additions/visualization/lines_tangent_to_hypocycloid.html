<script>
    // Рисует касательные к гипоциклоиде, оценка снизу из статей
    function drawLines(n) {
        const svgNS = "http://www.w3.org/2000/svg";
        const size = 900; // Размер холста
        const radius = 100; // Радиус окружности
        const centerX = size / 2, centerY = size / 2;

        const svg = document.createElementNS(svgNS, "svg");
        svg.setAttribute("width", size);
        svg.setAttribute("height", size);
        svg.style.border = "0.5px solid gray";

        function polarToCartesian(angle, scale = 1) {
            return {
                x: centerX + scale * radius * Math.cos(angle),
                y: centerY + scale * radius * Math.sin(angle)
            };
        }

        function extendToBounds(p1, p2) {
            const dx = p2.x - p1.x;
            const dy = p2.y - p1.y;
            const t1 = Math.min(
                -p1.x / dx, (size - p1.x) / dx,
                -p1.y / dy, (size - p1.y) / dy
            );
            const t2 = Math.max(
                -p1.x / dx, (size - p1.x) / dx,
                -p1.y / dy, (size - p1.y) / dy
            );
            return [
                { x: p1.x + t1 * dx, y: p1.y + t1 * dy },
                { x: p1.x + t2 * dx, y: p1.y + t2 * dy }
            ];
        }

        const k = 2/2;
        for (let i = 0; i < n; i++) {
            let x = (2 * i + 1) * Math.PI / n + 0.0001;
            let angle1 = k*x;
            //let angle2 = Math.PI - 2 * x;
            let angle2 = Math.PI -  (k+1)*x;
            // let angle2 = x + Math.PI/n;

            let p1 = polarToCartesian(angle1, 1.2);
            let p2 = polarToCartesian(angle2, 1.2);

            [p1, p2] = extendToBounds(p1, p2);

            let line = document.createElementNS(svgNS, "line");
            line.setAttribute("x1", p1.x);
            line.setAttribute("y1", p1.y);
            line.setAttribute("x2", p2.x);
            line.setAttribute("y2", p2.y);
            line.setAttribute("stroke", "black");
            line.setAttribute("stroke-width", "0.5px");
            svg.appendChild(line);
        }

        document.body.appendChild(svg);
    }

    // Вызываем функцию для n=10
    window.onload = () => drawLines(13);


</script>