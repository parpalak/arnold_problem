<script>
    function parse() {
        var source = document.getElementById("text").value;
        const generators = [];

        source.split(" ").forEach(element => {
            if (isNaN(element) || isNaN(parseInt(element))) {
                return;
            }

            generators.push(Number(element));
        });
        console.log(generators);

        const generatorsNum = generators.length;
        const n = Math.round(0.5 + Math.sqrt(2 * generatorsNum + 0.25));
        console.log("n=", n);

        const a = [];
        for (let i = 0; i < n; i++) {
            a[i] = i;
        }

        const lines = [];
        const arranges = [];
        const lineNum = 0;
        let prevGen = -1;

        arranges.push([...a]);

        for (let i = 0; i < generatorsNum; i++) {
            const curGen = generators[i];
            if (curGen % 2 === 0) {
                if (prevGen !== curGen + 2) {
                    lines.push([]);
                    arranges.push([...a]);
                }
                prevGen = curGen;

                lines[lines.length - 1].push(curGen);
            }

            let temp = a[curGen];
            a[curGen] = a[curGen + 1];
            a[curGen + 1] = temp;
        }

        console.log(arranges);
        console.log(lines[0]);
        console.log(lines[1]);

        const paths = [];
        for (let j = 0; j < n; j++) {
            paths[j] = [arranges[0][j]];
        }
        for (let i = 1; i < arranges.length; i++) {
            for (let j = 0; j < n; j++) {
                paths[arranges[i][j]][i] = j;
            }
        }

        console.log(paths);

        const zoom = 20;
        let result = '<svg version="1.1" width="' + n * zoom + '" height="' + (lines.length + 1) * zoom + '">';

        for (let i = 0; i < n; i++) {
            let line = 'L' + zoom * paths[i][0] + ' ' + zoom * 0;
            for (let j = 1; j < arranges.length; j++) {
                const prevX = paths[i][j - 1];
                const curX = paths[i][j];
                if (curX + 2 < prevX) {
                    line += ' Q'
                        + zoom * prevX + ' ' + zoom * (j - 0.8) + ', '
                        + zoom * (prevX - 1) + ' ' + zoom * (j - 0.8)
                        + ' L'
                        + zoom * (curX + 1) + ' ' + zoom * (j - 0.8)
                        + ' Q'
                        + zoom * curX + ' ' + zoom * (j - 0.8) + ', '
                        + zoom * curX + ' ' + zoom * j;

                } else if (curX > prevX + 1) {
                    line += ' C'
                        + zoom * prevX + ' ' + zoom * (j - .7) + ', '
                        + zoom * curX + ' ' + zoom * (j - 0.2) + ', '
                        + zoom * curX + ' ' + zoom * j;

                } else {
                    line += ' C'
                        + zoom * prevX + ' ' + zoom * (j - 0.5) + ', '
                        + zoom * curX + ' ' + zoom * (j - 0.5) + ', '
                        + zoom * curX + ' ' + zoom * j;

                }
            }

            // result += '<path fill="none" stroke="rgb(' + 200 * Math.random() + ',' + 200 * Math.random() + ',' + 200 * Math.random() + ')" d="'
                            result += '<path style="mix-blend-mode: difference; filter: invert(1);" stroke="none" d="'
                + 'M' + n * zoom + ' ' + (lines.length + 1) * zoom + ' L' + n * zoom + ' 0'
                + line
                + ' Z "/>';
        }

        result += '</svg>';

        console.log(result)

        document.getElementById('result').innerHTML = result;
    }
</script>
<style>
    path:hover {
        stroke-width: 3px;
    }
</style>
<textarea id="text">
    49 47 45 43 41 39 37 35 33 31 29 27 25 23 21 19 17 15 13 11 9 7 5 3 1 48 47 49 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 8 7 9 6 5 7 4 3 5 2 1 3 0 1 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 8 7 9 6 5 7 4 3 5 2 1 3 48 47 49 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 8 7 9 6 5 7 4 3 5 2 1 3 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 8 7 9 6 5 7 4 3 5 48 47 49 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 8 7 9 6 5 7 4 3 5 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 8 7 9 6 5 7 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 8 7 9 6 5 7 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 8 7 9 48 47 49 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 8 7 9 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 48 47 49 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 10 9 11 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 28 27 29 26 25 27 24 23 25 22 21 23 30 29 31 28 27 29 26 25 27 24 23 25 32 31 33 30 29 31 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 22 21 23 20 19 21 18 17 19 24 23 25 36 35 37 34 33 35 32 31 33 38 37 39 36 35 37 40 39 41 38 37 39 36 35 37 34 33 35 42 41 43 40 39 41 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 12 11 13 32 31 33 30 29 31 34 33 35 38 37 39 36 35 37 34 33 35 32 31 33 40 39 41 38 37 39 36 35 37 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 14 13 15 20 19 21 26 25 27 24 23 25 22 21 23 30 29 31 28 27 29 32 31 33 48 47 49 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 16 15 17 26 25 27 24 23 25 22 21 23 20 19 21 18 17 19 28 27 29 48 47 49 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 20 19 21 46 45 47 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 24 23 25 22 21 23 26 25 27 24 23 25 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 44 43 45 42 41 43 40 39 41 38 37 39 36 35 37 34 33 35 32 31 33 30 29 31 28 27 29 26 25 27 28 27 29 30 29 31 32 31 33 30 29 31 28 27 29 34 33 35 32 31 33 40 39 41 38 37 39 36 35 37 34 33 35
</textarea>
<button onclick="parse()">parse</button>
<div id="result"></div>